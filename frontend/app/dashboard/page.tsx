'use client';\n\nimport { useState, useEffect } from 'react';\nimport { api } from '@/lib/api';\n\ninterface Payment {\n  id: string;\n  amount: number;\n  currency: string;\n  method: string;\n  status: string;\n  program: string;\n  date: string;\n  receiptNumber: string;\n}\n\nexport default function DashboardPage() {\n  const [payments, setPayments] = useState<Payment[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [user] = useState({ id: '1', name: 'Utilisateur CBTC', email: 'user@cbtc.com' });\n\n  useEffect(() => {\n    loadUserPayments();\n  }, []);\n\n  const loadUserPayments = async () => {\n    try {\n      const response = await api(`/api/payments/user/${user.id}`);\n      if (response.success) {\n        setPayments(response.payments);\n      }\n    } catch (error) {\n      console.error('Error loading payments:', error);\n    }\n    setLoading(false);\n  };\n\n  const getMethodIcon = (method: string) => {\n    switch (method) {\n      case 'WAVE_MOBILE': return '📱';\n      case 'CASH_POS': return '💵';\n      case 'BANK_TRANSFER': return '🏦';\n      case 'CREDIT_CARD': return '💳';\n      default: return '💰';\n    }\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'COMPLETED': return 'text-green-600 bg-green-100';\n      case 'PENDING': return 'text-yellow-600 bg-yellow-100';\n      case 'PROCESSING': return 'text-blue-600 bg-blue-100';\n      case 'FAILED': return 'text-red-600 bg-red-100';\n      default: return 'text-gray-600 bg-gray-100';\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Header */}\n      <div className=\"bg-white shadow\">\n        <div className=\"max-w-7xl mx-auto px-4 py-6\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h1 className=\"text-3xl font-bold text-gray-900\">🎓 Tableau de Bord CBTC</h1>\n              <p className=\"text-gray-600 mt-1\">Bienvenue, {user.name}</p>\n            </div>\n            <div className=\"flex items-center space-x-4\">\n              <div className=\"text-right\">\n                <p className=\"text-sm text-gray-600\">{user.email}</p>\n                <p className=\"text-xs text-green-600\">✅ Compte actif</p>\n              </div>\n              <div className=\"w-10 h-10 bg-indigo-600 rounded-full flex items-center justify-center text-white font-bold\">\n                {user.name.charAt(0)}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"max-w-7xl mx-auto px-4 py-8\">\n        {/* Quick Stats */}\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8\">\n          <div className=\"bg-white rounded-lg shadow p-6\">\n            <div className=\"flex items-center\">\n              <div className=\"p-3 rounded-full bg-blue-100 text-blue-600 text-xl mr-4\">🎓</div>\n              <div>\n                <p className=\"text-sm font-medium text-gray-600\">Formations</p>\n                <p className=\"text-2xl font-bold text-gray-900\">{payments.length}</p>\n              </div>\n            </div>\n          </div>\n          \n          <div className=\"bg-white rounded-lg shadow p-6\">\n            <div className=\"flex items-center\">\n              <div className=\"p-3 rounded-full bg-green-100 text-green-600 text-xl mr-4\">✅</div>\n              <div>\n                <p className=\"text-sm font-medium text-gray-600\">Complétées</p>\n                <p className=\"text-2xl font-bold text-gray-900\">\n                  {payments.filter(p => p.status === 'COMPLETED').length}\n                </p>\n              </div>\n            </div>\n          </div>\n          \n          <div className=\"bg-white rounded-lg shadow p-6\">\n            <div className=\"flex items-center\">\n              <div className=\"p-3 rounded-full bg-purple-100 text-purple-600 text-xl mr-4\">💰</div>\n              <div>\n                <p className=\"text-sm font-medium text-gray-600\">Total Payé</p>\n                <p className=\"text-2xl font-bold text-gray-900\">\n                  {payments.reduce((sum, p) => sum + p.amount, 0).toLocaleString()} XOF\n                </p>\n              </div>\n            </div>\n          </div>\n          \n          <div className=\"bg-white rounded-lg shadow p-6\">\n            <div className=\"flex items-center\">\n              <div className=\"p-3 rounded-full bg-indigo-100 text-indigo-600 text-xl mr-4\">📊</div>\n              <div>\n                <p className=\"text-sm font-medium text-gray-600\">Progression</p>\n                <p className=\"text-2xl font-bold text-gray-900\">85%</p>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* My Payments */}\n        <div className=\"bg-white rounded-lg shadow\">\n          <div className=\"px-6 py-4 border-b border-gray-200\">\n            <h3 className=\"text-lg font-medium text-gray-900\">💳 Mes Paiements</h3>\n          </div>\n          \n          {loading ? (\n            <div className=\"p-12 text-center\">\n              <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-4\"></div>\n              <p className=\"text-gray-600\">Chargement...</p>\n            </div>\n          ) : payments.length === 0 ? (\n            <div className=\"p-12 text-center\">\n              <div className=\"text-4xl mb-4\">💳</div>\n              <p className=\"text-gray-500 mb-4\">Aucun paiement trouvé</p>\n              <Link\n                href=\"/courses\"\n                className=\"inline-block bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700\"\n              >\n                Explorer les formations\n              </Link>\n            </div>\n          ) : (\n            <div className=\"overflow-x-auto\">\n              <table className=\"min-w-full divide-y divide-gray-200\">\n                <thead className=\"bg-gray-50\">\n                  <tr>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Formation\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Montant\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Méthode\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Statut\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Date\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Reçu\n                    </th>\n                  </tr>\n                </thead>\n                <tbody className=\"bg-white divide-y divide-gray-200\">\n                  {payments.map((payment) => (\n                    <tr key={payment.id} className=\"hover:bg-gray-50\">\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\n                        <div className=\"text-sm font-medium text-gray-900\">{payment.program}</div>\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\n                        <div className=\"text-sm font-bold text-gray-900\">\n                          {payment.amount.toLocaleString()} {payment.currency}\n                        </div>\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\n                        <div className=\"flex items-center text-sm text-gray-900\">\n                          <span className=\"mr-2\">{getMethodIcon(payment.method)}</span>\n                          {payment.method.replace('_', ' ')}\n                        </div>\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\n                        <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${\n                          getStatusColor(payment.status)\n                        }`}>\n                          {payment.status}\n                        </span>\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                        {new Date(payment.date).toLocaleDateString('fr-FR')}\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm\">\n                        <button className=\"text-indigo-600 hover:text-indigo-700 font-medium\">\n                          📄 Télécharger\n                        </button>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          )}\n        </div>\n\n        {/* Quick Actions */}\n        <div className=\"mt-8 grid grid-cols-2 md:grid-cols-4 gap-4\">\n          <Link\n            href=\"/courses\"\n            className=\"bg-white rounded-lg shadow p-6 text-center hover:shadow-lg transition-shadow\"\n          >\n            <div className=\"text-3xl mb-2\">🎓</div>\n            <div className=\"font-medium text-gray-900\">Nouvelles Formations</div>\n          </Link>\n          \n          <Link\n            href=\"/ielts\"\n            className=\"bg-white rounded-lg shadow p-6 text-center hover:shadow-lg transition-shadow\"\n          >\n            <div className=\"text-3xl mb-2\">🧪</div>\n            <div className=\"font-medium text-gray-900\">Test IELTS</div>\n          </Link>\n          \n          <button className=\"bg-white rounded-lg shadow p-6 text-center hover:shadow-lg transition-shadow\">\n            <div className=\"text-3xl mb-2\">📊</div>\n            <div className=\"font-medium text-gray-900\">Mes Progrès</div>\n          </button>\n          \n          <button className=\"bg-white rounded-lg shadow p-6 text-center hover:shadow-lg transition-shadow\">\n            <div className=\"text-3xl mb-2\">📞</div>\n            <div className=\"font-medium text-gray-900\">Support</div>\n          </button>\n        </div>\n      </div>\n    </main>\n  );\n}"
