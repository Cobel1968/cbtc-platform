'use client';\n\nimport { useState, useEffect } from 'react';\nimport { api } from '@/lib/api';\n\ninterface PaymentSummary {\n  daily: {\n    total: number;\n    transactions: number;\n    currency: string;\n  };\n  monthly: {\n    total: number;\n    transactions: number;\n    currency: string;\n  };\n  methods: Array<{\n    method: string;\n    total: number;\n    transactions: number;\n  }>;\n}\n\ninterface Payment {\n  id: string;\n  amount: number;\n  currency: string;\n  method: string;\n  status: string;\n  program: string;\n  date: string;\n  receiptNumber: string;\n}\n\nexport default function FinancialDashboard() {\n  const [summary, setSummary] = useState<PaymentSummary | null>(null);\n  const [payments, setPayments] = useState<Payment[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [selectedUserId, setSelectedUserId] = useState('1');\n\n  useEffect(() => {\n    loadFinancialData();\n  }, []);\n\n  const loadFinancialData = async () => {\n    try {\n      // Load financial summary (admin only)\n      const summaryResponse = await api('/api/payments/financial/summary');\n      setSummary(summaryResponse);\n      \n      // Load user payments\n      const paymentsResponse = await api(`/api/payments/user/${selectedUserId}`);\n      setPayments(paymentsResponse.payments || []);\n      \n    } catch (error) {\n      console.error('Error loading financial data:', error);\n    }\n    setLoading(false);\n  };\n\n  const getMethodIcon = (method: string) => {\n    switch (method) {\n      case 'WAVE_MOBILE': return 'üì±';\n      case 'CASH_POS': return 'üíµ';\n      case 'BANK_TRANSFER': return 'üè¶';\n      case 'CREDIT_CARD': return 'üí≥';\n      default: return 'üí∞';\n    }\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'COMPLETED': return 'text-green-600 bg-green-100';\n      case 'PENDING': return 'text-yellow-600 bg-yellow-100';\n      case 'PROCESSING': return 'text-blue-600 bg-blue-100';\n      case 'FAILED': return 'text-red-600 bg-red-100';\n      default: return 'text-gray-600 bg-gray-100';\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center p-12\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4\"></div>\n          <p className=\"text-gray-600\">Chargement des donn√©es financi√®res...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Financial Summary Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n        <div className=\"bg-white rounded-lg shadow p-6\">\n          <div className=\"flex items-center\">\n            <div className=\"p-3 rounded-full bg-green-100 text-green-600 text-2xl mr-4\">\n              üìà\n            </div>\n            <div>\n              <p className=\"text-sm font-medium text-gray-600\">Aujourd'hui</p>\n              <p className=\"text-2xl font-bold text-gray-900\">\n                {summary?.daily.total.toLocaleString() || 0} XOF\n              </p>\n              <p className=\"text-sm text-gray-500\">\n                {summary?.daily.transactions || 0} transactions\n              </p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-lg shadow p-6\">\n          <div className=\"flex items-center\">\n            <div className=\"p-3 rounded-full bg-blue-100 text-blue-600 text-2xl mr-4\">\n              üìä\n            </div>\n            <div>\n              <p className=\"text-sm font-medium text-gray-600\">Ce mois</p>\n              <p className=\"text-2xl font-bold text-gray-900\">\n                {summary?.monthly.total.toLocaleString() || 0} XOF\n              </p>\n              <p className=\"text-sm text-gray-500\">\n                {summary?.monthly.transactions || 0} transactions\n              </p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-lg shadow p-6\">\n          <div className=\"flex items-center\">\n            <div className=\"p-3 rounded-full bg-indigo-100 text-indigo-600 text-2xl mr-4\">\n              üí≥\n            </div>\n            <div>\n              <p className=\"text-sm font-medium text-gray-600\">M√©thodes</p>\n              <div className=\"space-y-1\">\n                {summary?.methods.map((method, index) => (\n                  <div key={index} className=\"text-sm\">\n                    <span className=\"mr-2\">{getMethodIcon(method.method)}</span>\n                    <span className=\"font-medium\">{method.total.toLocaleString()} XOF</span>\n                  </div>\n                )) || <p className=\"text-sm text-gray-500\">Aucune donn√©e</p>}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Payment Methods Breakdown */}\n      <div className=\"bg-white rounded-lg shadow\">\n        <div className=\"px-6 py-4 border-b border-gray-200\">\n          <h3 className=\"text-lg font-medium text-gray-900\">üí≥ R√©partition des Paiements</h3>\n        </div>\n        <div className=\"p-6\">\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n            <div className=\"text-center p-4 bg-blue-50 rounded-lg\">\n              <div className=\"text-3xl mb-2\">üì±</div>\n              <div className=\"font-medium text-blue-900\">Wave Money</div>\n              <div className=\"text-sm text-blue-600\">+2250555007884</div>\n            </div>\n            \n            <div className=\"text-center p-4 bg-green-50 rounded-lg\">\n              <div className=\"text-3xl mb-2\">üíµ</div>\n              <div className=\"font-medium text-green-900\">Comptoir POS</div>\n              <div className=\"text-sm text-green-600\">Paiement direct</div>\n            </div>\n            \n            <div className=\"text-center p-4 bg-purple-50 rounded-lg\">\n              <div className=\"text-3xl mb-2\">üè¶</div>\n              <div className=\"font-medium text-purple-900\">Virement</div>\n              <div className=\"text-sm text-purple-600\">Bancaire</div>\n            </div>\n            \n            <div className=\"text-center p-4 bg-gray-50 rounded-lg\">\n              <div className=\"text-3xl mb-2\">üí≥</div>\n              <div className=\"font-medium text-gray-900\">Carte</div>\n              <div className=\"text-sm text-gray-600\">Cr√©dit/D√©bit</div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Recent Payments */}\n      <div className=\"bg-white rounded-lg shadow\">\n        <div className=\"px-6 py-4 border-b border-gray-200\">\n          <h3 className=\"text-lg font-medium text-gray-900\">üìã Paiements R√©cents</h3>\n        </div>\n        <div className=\"overflow-x-auto\">\n          <table className=\"min-w-full divide-y divide-gray-200\">\n            <thead className=\"bg-gray-50\">\n              <tr>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Transaction\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Programme\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Montant\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  M√©thode\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Statut\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Date\n                </th>\n              </tr>\n            </thead>\n            <tbody className=\"bg-white divide-y divide-gray-200\">\n              {payments.map((payment) => (\n                <tr key={payment.id} className=\"hover:bg-gray-50\">\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\n                    {payment.receiptNumber}\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                    {payment.program}\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\n                    {payment.amount.toLocaleString()} {payment.currency}\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                    <span className=\"mr-2\">{getMethodIcon(payment.method)}</span>\n                    {payment.method.replace('_', ' ')}\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${\n                      getStatusColor(payment.status)\n                    }`}>\n                      {payment.status}\n                    </span>\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                    {new Date(payment.date).toLocaleDateString('fr-FR')}\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n          \n          {payments.length === 0 && (\n            <div className=\"text-center py-12\">\n              <div className=\"text-4xl mb-4\">üí≥</div>\n              <p className=\"text-gray-500\">Aucun paiement trouv√©</p>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}"
